#!/usr/bin/env bash

source ./bin/init-env

# --publish 3306:3306 \

docker container ls | grep ${SERVICE_NAME}-db 1> /dev/null
if [[ $? = 1 ]]; then
  echo "Starting DB... "
  docker run --rm --detach \
  --name ${SERVICE_NAME}-db \
  --env MYSQL_ROOT_PASSWORD=mysql_password \
  --env MYSQL_PASSWORD=mysql_password \
  --env MYSQL_USER=mysql_user \
  --mount source=${SERVICE_NAME}-db-data,target=/var/lib/mysql \
  --mount type=bind,source=$PWD/dumps,target=/dumps \
  --network ${SERVICE_NAME}-bridge-docker-network \
  mysql:5.7.33 > /dev/null 2>&1
else
  echo "DB Started!"
fi